<#-- WARNING : be careful to white-space and lines break in FreeMarker macros.
 # This macro template can be used to output white-space-sensitive formats (like RSS files).
 # See http://dev.lutece.paris.fr/jira/browse/LUTECE-765
-->
<#include "util/standard/macro_standard.html" />
<#include "util/calendar/macro_datepicker.html" />
<#-- Do not remove this comment -->

<#macro comboWithParams name default_value additionalParameters items >
<select id="${name}" name="${name}" ${additionalParameters} >			
<#list items as item>	
	<#if default_value="${item.code}"> 			
		<option selected="selected" value="${item.code}" >${item.name}</option>    			    			
   	<#else>
   		<option value="${item.code}" >${item.name}</option>
   	</#if>
</#list>		
</select>
</#macro>

<#macro comboSortedWithParams name default_value additionalParameters items >
<select id="${name}" name="${name}" ${additionalParameters} >			
<#list items?sort_by("name") as item>	
	<#if default_value="${item.code}"> 			
		<option selected="selected" value="${item.code}" >${item.name}</option>    			    			
   	<#else>
   		<option value="${item.code}" >${item.name}</option>
   	</#if>
</#list>		
</select>
</#macro>

<#macro comboWithParamsAndLength name default_value additionalParameters items max_length >
	<select id="${name}" name="${name}" ${additionalParameters} >			
		<#list items as item>
    	    <#if max_length < item.name?length >
            	<#assign item_new = "..." + "${item.name?substring(item.name?length-max_length+3)}" >
            <#else>
              	<#assign item_new = "${item.name}">
            </#if>	
			<#if default_value="${item.code}"> 			
      			<option selected="selected" value="${item.code}" >${item_new}</option>    			    			
      		<#else>
      			<option value="${item.code}" >${item_new}</option>
      		</#if>
    	</#list>		
	</select>
</#macro>

<#macro combo name default_value items >
	<@comboWithParams name="${name}" default_value="${default_value}" additionalParameters="" items=items />
</#macro>

<#macro comboSorted name default_value items >
	<@combo name="${name}" default_value="${default_value}" items=items?sort_by("name") />
</#macro>

<#macro radioImageList name default_value items >
<#list items as item>
    <#if default_value="${item.code}"> 			
        <input checked="checked" class="radio" type="radio" name="${name}" value="${item.code}" /><img src="${item.name}" alt="" />
    <#else>
        <input class="radio" type="radio" name="${name}" value="${item.code}" /><img src="${item.name}" alt="" />
    </#if>
</#list>
</#macro>

<#macro checkboxList name default_values items >
<#list items as item>
	<#if item.checked > 			
		<label for="document_type"><input checked class="checkbox" type="checkbox" name="${name}" value="${item.code}" />&nbsp;${item.name}</label>
    <#else>
        <label for="document_type"><input class="checkbox" type="checkbox" name="${name}" value="${item.code}" />&nbsp;${item.name}</label>
	</#if>
</#list>
</#macro>                

<#macro sort jsp_url attribute >
	<#if jsp_url?contains("?")>
		<#assign sort_url = jsp_url + "&amp;sorted_attribute_name=" + attribute + "&amp;asc_sort=" />
	<#else>
		<#assign sort_url = jsp_url + "?sorted_attribute_name=" + attribute + "&amp;asc_sort=" />
	</#if>
	<a id="sort" href="${sort_url}true#sort" title="#i18n{portal.util.sort.asc}" >
		<i class="icon-chevron-up"></i>
	</a>
	<a href="${sort_url}false#sort" title="#i18n{portal.util.sort.desc}">
    	<i class="icon-chevron-down"></i>
    </a>
</#macro>

<#macro pagination paginator >
	<#assign nbLinkPagesToDisplay = 10 />
	<#assign offsetPrev = nbLinkPagesToDisplay / 2 />
	<#assign offsetNext = nbLinkPagesToDisplay / 2 />
	<#if ( paginator.pageCurrent <= nbLinkPagesToDisplay - offsetPrev )>
		<#assign offsetPrev = paginator.pageCurrent - 1 />
		<#assign offsetNext = nbLinkPagesToDisplay - offsetPrev />
	<#elseif ( paginator.pageCurrent + offsetNext > paginator.pagesCount )>
		<#assign offsetNext = paginator.pagesCount - paginator.pageCurrent />
		<#assign offsetPrev = nbLinkPagesToDisplay - offsetNext />
	</#if>
        <div class="pagination">
            <ul>
    <#if ( paginator.pagesCount > 1 )>
        <#if ( paginator.pageCurrent - offsetPrev > 1 )>
        <li class="previous-off">
        <a href="${paginator.firstPageLink?xhtml}">
            <img src="images/admin/skin/first.png" alt="&lt;" />
        </a>
        </li>
        </#if>
        <#if ( paginator.pageCurrent > 1 )>
        <li class="previous">
        <a href="${paginator.previousPageLink?xhtml}">
            <img src="images/admin/skin/prev.png" alt="&lt;" />
        </a>
        </li>
        <#else>
            &nbsp;&nbsp;
        </#if>
        <#if ( paginator.pageCurrent - offsetPrev > 1 )>
        	<strong>...</strong>
        </#if>
        <#list paginator.pagesLinks as link>
			<#if link.index == paginator.pageCurrent>
			<li class="active"><a href="${link.url?xhtml}">${link.name}</a></li>
			<#else>
                        <li><a href="${link.url?xhtml}">${link.name}</a></li>
			</#if>
        </#list>
        <#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
        	<strong>...</strong>
        </#if>
        <#if ( paginator.pageCurrent < paginator.pagesCount )>
        <li class="next">
        <a href="${paginator.nextPageLink?xhtml}">
            <img src="images/admin/skin/next.png" alt="&gt;" />
        </a>
        </li>
        <#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
        <li class="next-off">
        <a href="${paginator.lastPageLink?xhtml}">
            <img src="images/admin/skin/last.png" alt="&lt;" />
        </a>
        </li>
        </#if>
        <#else>
            &nbsp;&nbsp;
        </#if>
    </#if>
            </ul>
        </div>
</#macro>


<#macro paginationAdmin paginator combo=0 form=1 nb_items_per_page=nb_items_per_page>
    <div class="row">
    <#if (paginator.pagesCount > 1) >
        <@paginationPageLinks paginator=paginator />
    </#if>
    <#if form == 1 >
    <form class="form-inline pull-right" method="post" action="">
    </#if>
        
    <@paginationItemCount paginator=paginator combo=combo nb_items_per_page=nb_items_per_page/>
        
    <#if form == 1 >
    </form>
    </#if>
   </div>
 </#macro>

 <#macro paginationPageLinks paginator >
	<#assign nbLinkPagesToDisplay = 10 />
	<#assign offsetPrev = nbLinkPagesToDisplay / 2 />
	<#assign offsetNext = nbLinkPagesToDisplay / 2 />
	<#if ( paginator.pageCurrent <= nbLinkPagesToDisplay - offsetPrev )>
		<#assign offsetPrev = paginator.pageCurrent - 1 />
		<#assign offsetNext = nbLinkPagesToDisplay - offsetPrev />
	<#elseif ( paginator.pageCurrent + offsetNext > paginator.pagesCount )>
		<#assign offsetNext = paginator.pagesCount - paginator.pageCurrent />
		<#assign offsetPrev = nbLinkPagesToDisplay - offsetNext />
	</#if>
        <div class="pagination pagination-centered">
         <ul>
        <#if ( paginator.pageCurrent - offsetPrev > 1 )>
        <li>
        <a href="${paginator.firstPageLink?xhtml}">
            ${paginator.labelFirst}
        </a>
        </li>
        </#if>
        <#if (paginator.pageCurrent > 1) >
        <li class="previous">
        <a href="${paginator.previousPageLink?xhtml}">
            ${paginator.labelPrevious}
        </a>
        </li>
        <#else>
        <li class="disabled">
            <a href="">${paginator.labelPrevious}</a>
        </li>
        </#if>
        <#if ( paginator.pageCurrent - offsetPrev > 1 )>
        <li>
        	<strong>...</strong>
        </li>
        </#if>
        <#list paginator.pagesLinks as link>
			<#if ( link.index == paginator.pageCurrent )>
                        <li class="active">
				<a href="${link.url?xhtml}">${link.name}</a>
                        </li>
			<#else>
                        <li>
				<a href="${link.url?xhtml}">${link.name}</a>
                        </li>
			</#if>
        </#list>
        <#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
        <li>
        	<strong>...</strong>
        </li>
        </#if>
        <#if (paginator.pageCurrent < paginator.pagesCount) >
        <li class="next">
        <a href="${paginator.nextPageLink?xhtml}">
            ${paginator.labelNext}
        </a>
        </li>
        <#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
        <li class="next">
        <a href="${paginator.lastPageLink?xhtml}">
            ${paginator.labelLast}
        </a>
        </li>
        </#if>
        <#else>
        <li class="disabled">
            <a href="">${paginator.labelNext}</a>
        </li>
        </#if>
        </ul>
        </div>
 </#macro>
 
<#macro paginationCombo paginator nb_items_per_page=nb_items_per_page>
        ${paginator.labelItemCountPerPage} :
        <select class="span1" name="${paginator.itemsPerPageParameterName}">
            <#list [ "10" , "20" , "50" , "100" ] as nb>
             <#if nb_items_per_page = nb >
             	<option selected="selected" value="${nb}">${nb}</option>
             <#else>
             	<option value="${nb}">${nb}</option>
             </#if>
            </#list>
        </select>
        <button class="btn btn-mini" type="submit" title="#i18n{portal.util.labelRefresh}"/>
        <i class="icon-repeat"></i>
        </button>
        &nbsp;-&nbsp;
</#macro>

<#macro paginationItemCount paginator combo=0 nb_items_per_page=nb_items_per_page>
        <#-- Display combo -->
        <#if combo == 1 >
            <@paginationCombo paginator=paginator nb_items_per_page=nb_items_per_page/>
        </#if>
        <#-- Display item count -->
        ${paginator.labelItemCount} : ${paginator.itemsCount}

</#macro>


<#macro item_navigation item_navigator>
	<div id="item-navigator">
		<#if (item_navigator.currentItemId > 0)>
			<a href="${item_navigator.previousPageLink?xhtml}" title="#i18n{portal.util.labelPrevious}">
	            <i class="icon-circle-arrow-left"></i>
	            #i18n{portal.util.labelPrevious}
	        </a>
	    <#else>
	    	&nbsp;&nbsp;
		</#if>
		<#if (item_navigator.currentItemId < item_navigator.listItemSize - 1) >
	         <a href="${item_navigator.nextPageLink?xhtml}" title="#i18n{portal.util.labelNext}">
	         	#i18n{portal.util.labelNext}
	           <i class="icon-circle-arrow-right"></i>
	        </a>
	    <#else>
	    	&nbsp;&nbsp;
		</#if>
	</div>
</#macro>
