<div class="row-fluid">
    <div class="span8 offset2">
            <fieldset>
                <legend>#i18n{portal.rbac.view_role_description.titleRoleDescription}</legend>
                <strong>#i18n{portal.rbac.view_role_description.labelKey} :</strong> ${role.key}
                <strong>#i18n{portal.rbac.view_role_description.labelDescription} :</strong> ${role.description}
                <form class="form-horizontal" method="post"  action="jsp/admin/rbac/ModifyRole.jsp">
                    <input type="hidden" name="role_key" value="${role.key}" />
                    <button class="btn btn-primary" type="submit" >#i18n{portal.rbac.view_role_description.buttonLabelModify}</button>
                    <button class="btn btn-primary" onclick="javascript:history.go(-1)" >#i18n{portal.admin.message.buttonCancel}</button>
                </form>
            </fieldset>
            <fieldset>
                <legend>#i18n{portal.rbac.view_role_description.titleControlsList} "${role.key}" </legend>
                <table class="table table-striped table-condensed">
                    <tr>
                        <th>#i18n{portal.rbac.view_role_description.columnTitleResourceType}</th>
                        <th>#i18n{portal.rbac.view_role_description.columnTitleResourceId}</th>
                        <th>#i18n{portal.rbac.view_role_description.columnTitlePermission}</th>
                        <th>#i18n{portal.rbac.view_role_description.columnTitleDeleteControl}</th>
                    </tr>
                    <#assign previousResourceTypeKey = "" >
                    <#list controled_resource_list as controled_resource >
                    <#if controled_resource.resourceTypeKey != previousResourceTypeKey >
                    <tr><td colspan="4">&nbsp;</td></tr>
                    </#if>
                    <tr>
                        <#if controled_resource.resourceTypeKey != previousResourceTypeKey >
                        <td>${controled_resource.resourceTypeLabel} (${controled_resource.resourceTypeKey})</td>
                        <#else>
                        <td>&nbsp;</td>
                        </#if>
                        <!--<td>${controled_resource.resourceTypeLabel} (${controled_resource.resourceTypeKey})</td>-->
                        <td>${controled_resource.resourceIdLabel} (${controled_resource.resourceId})</td>
                        <td>${controled_resource.permissionLabel} (${controled_resource.permissionKey})</td>
                        <td>
                            <form class="form-horizontal" method="post"  action="jsp/admin/rbac/DoConfirmRemoveControlFromRole.jsp">
                                <input type="hidden" name="rbac_id" value="${controled_resource.RBACId}" />
                                <button class="btn btn-primary" type="submit" >#i18n{portal.rbac.view_role_description.buttonLabelDeleteControl}</button>
                            </form>
                        </td>
                    </tr>
                    <#assign previousResourceTypeKey = controled_resource.resourceTypeKey >
                    </#list>
                </table>
                <fieldset>
                    <form class="form-horizontal" method="post"  action="jsp/admin/rbac/AddControlToRole.jsp">
                        <select name="resource_type" >
                            <!--<option value =""></option>-->
                            <#list resource_type_list?sort_by("resourceTypeLabel") as resource_type >
                            <option value ="${resource_type.resourceTypeKey}">${resource_type.resourceTypeLabel}</option>
                            </#list>
                        </select>
                        <input type="hidden" name="role_key" value="${role.key}" />
                        <button class="btn btn-primary" type="submit" >#i18n{portal.rbac.view_role_description.buttonLabelAddControl}</button>
                    </form>
            </fieldset>
    </div>
</div>